<div class="grid">
    

        <div class="card" style="width: 100%;">
            <h5>User Management</h5>
            <p-tabView orientation="left">
                <p-tabPanel header="Users" class="line-height-3 m-0">
                   <div class="col-12" >
        <div class="card px-4 py-3 "  >
            <p-toast></p-toast>
            <p-toolbar styleClass="mb-4">
                <ng-template pTemplate="left">
                    <div class="my-2">
                        <button pButton pRipple label="New" icon="pi pi-plus" class="p-button-success mr-2" (click)="openNew()"></button>
                        <button pButton pRipple label="Delete" icon="pi pi-trash" class="p-button-danger" (click)="deleteSelectedProducts()" [disabled]="!selectedUsers || !selectedUsers.length"></button>
                    </div>
                </ng-template>

                <!-- <ng-template pTemplate="right">
                    <p-fileUpload mode="basic" accept="image/*" [maxFileSize]="1000000" label="Import" chooseLabel="Import" class="mr-2 inline-block"></p-fileUpload>
                    <button pButton pRipple label="Export" icon="pi pi-upload" class="p-button-help" (click)="dt.exportCSV()"></button>
                </ng-template> -->
            </p-toolbar>

            <p-table #dt [value]="users" [columns]="cols" responsiveLayout="scroll" [rows]="5" [globalFilterFields]="['name','country.name','representative.name','status']" [rows]="5" [paginator]="true" [rowsPerPageOptions]="[5,10,20,30]" [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [(selection)]="selectedUsers" selectionMode="multiple" [rowHover]="true" dataKey="id">
                <ng-template pTemplate="caption">
                    <div class="flex flex-column md:flex-row md:justify-content-between md:align-items-center">
                        <h5 class="m-0">Users</h5>
                        <span class="block mt-2 md:mt-0 p-input-icon-left">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text" (input)="onGlobalFilter(dt, $event)" placeholder="Search..."  class="w-full sm:w-auto"/>
                        </span>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width: 3rem">
                            <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                        </th>
                        <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
                        <th pSortableColumn="username">User Name <p-sortIcon field="username"></p-sortIcon></th>
                        <th pSortableColumn="role">Role <p-sortIcon field="role"></p-sortIcon></th>
                        <th pSortableColumn="groups">Group<p-sortIcon field="groups"></p-sortIcon></th>
                        <th pSortableColumn="ipaddress">IP Address<p-sortIcon field="ipaddress"></p-sortIcon></th>
                        <th pSortableColumn="created_date">Created Date <p-sortIcon field="created_date"></p-sortIcon></th>
                        <th pSortableColumn="creator_id">Creator_id<p-sortIcon field="creator_id"></p-sortIcon></th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-user>
                    <tr  >
                        <td>
                            <p-tableCheckbox [value]="user"></p-tableCheckbox>
                        </td>
                        <td style="width:14%; min-width:10rem;"><span class="p-column-title">Name</span>
                            {{user.name}}
                        </td>
                        <td style="width:14%; min-width:10rem;">
                            <span class="p-column-title">User Name</span>
                            {{user.username}}
                        </td>
                        <td style="width:14%; min-width:10rem;"><span class="p-column-title">Role</span>
                            <!-- <img [src]="'assets/demo/images/product/' + product.image" [alt]="product.name" width="100" class="shadow-4" /> -->
                            <span class="p-column-title">Role</span>
                            {{user.role}}
                        </td>
                        <td style="width:14%; min-width:8rem;">
                            <span class="p-column-title">Group</span>
                            <ul>
                            <li  *ngFor="let grp of user.groups">
                                {{grp.name}} 
        
                              </li>
                            </ul>
                            <!-- {{user.groups[0].name}} -->
                        </td>
                        <td style="width:14%; min-width:10rem;">
                            <span class="p-column-title">IP Address</span>
                            {{user.ipaddress}}
                        </td>
                        <td style="width:14%; min-width: 10rem;"><span class="p-column-title">created Date</span>
                            <!-- <p-rating [ngModel]="product.rating" [readonly]="true" [cancel]="false"></p-rating> -->
                            <span class="p-column-title">Created Date</span>
                            {{user.created_date | date:'MM/dd/yyyy  HH:mm:ss'}}
                        </td>
                        <td style="width:14%; min-width: 10rem;"><span class="p-column-title">Status</span>
                          
                            <span class="p-column-title">creator Id</span>
                            {{user.creator_id}}
                            <!-- <span [class]="'product-badge status-' + (product.inventoryStatus ? product.inventoryStatus.toLowerCase() : '')">{{product.inventoryStatus}}</span> -->
                        </td>
                        <td>
                            <div class="flex">
                                <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2" (click)="editUser(user)"></button>
                                <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="delUser(user)"></button>
                            </div>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>

        
        <p-dialog [(visible)]="userDialog"  [style]="{width: '450px'}" header="User Details" [modal]="true" class="p-fluid">
            
           
            <ng-template pTemplate="content" >

                <div class="field"> 

                  <label  for="grp">Organization</label> 
                                       
                                       
                                <p-multiSelect [options]="organizations" [(ngModel)]="selectedMulti" defaultLabel="Select a Organization" optionLabel="name" class="multiselect-custom" >
                                    <ng-template let-value pTemplate="selectedItems">
                                        <div class="country-item country-item-value" *ngFor="let option of selectedMulti">
                                            
                                            <div>{{option.name}}</div>
                                        </div>
                                        <div *ngIf="!selectedMulti || selectedMulti.length === 0" class="country-placeholder">
                                            Select Organization
                                        </div>
                                    </ng-template>
                                    <ng-template let-orgn pTemplate="item">
                                        <div class="country-item">
                                            
                                            <div>{{orgn.name}}</div>
                                        </div>
                                    </ng-template>
                                </p-multiSelect> 
                            </div>

                            <div class="field">
                                <label for="role">Role</label>
                                <!-- <p-dropdown id="role" [options]="unirole" optionLabel="name" [(ngModel)]="user.role" placeholder="Select a Role"  [showClear]="true" >
                                    
                                    <ng-template pTemplate="selectedItem">
                                        <span *ngIf="user && user.role" >{{user.role.name}}</span>
                                        
            
                                    </ng-template>
                                   
                                    <ng-template let-uni pTemplate="item" >
                                        <span >{{uni}}</span>
                                        
                                        
                                    </ng-template>
                                   
                                  
                                    
                                </p-dropdown> -->
                                
                                <p-dropdown [options]="unirole" [(ngModel)]="user.role" placeholder="Select a Role" [showClear]="true"></p-dropdown>
                              
                             
                               
                            </div>

                
              
                <div class="field">
                    <label for="name">Name</label>
                    <input type="text"  pInputText id="name" [(ngModel)]="user.name" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !user.name}"/>
                    <small class="ng-dirty ng-invalid" *ngIf="submitted && !user.name">Name is required.</small>
                </div>
                <div class="field">
                    <label for="username">User Name</label>
                    
                    <input type="text"  pInputText id="username" [(ngModel)]="user.username" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !user.username}"/>
                    <small class="ng-dirty ng-invalid" *ngIf="submitted && !user.username">Username is required.</small>
                </div>
                
          
            </ng-template>
          
            
    
            <ng-template pTemplate="footer">
                <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
                <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="saveUser()"></button>
            </ng-template>
       
       
        </p-dialog>







        <p-dialog [(visible)]="userEditDialog"  [style]="{width: '450px'}" header="User Details" [modal]="true" class="p-fluid">
            <ng-template pTemplate="content" >



                <div class="field"> 


                    <label  for="grp">Organization</label> 
                                
                                
                         <p-multiSelect [options]="organizations" [(ngModel)]="selectedMulti" defaultLabel="Select a Organization" optionLabel="name" class="multiselect-custom">
                             <ng-template let-value pTemplate="selectedItems">
                                 <div class="country-item country-item-value" *ngFor="let option of selectedMulti">
                                     
                                     <div>{{option.name}}</div>
                                 </div>
                                 <div *ngIf="!selectedMulti || selectedMulti.length === 0" class="country-placeholder">
                                     Select Organization
                                 </div>
                             </ng-template>
                             <ng-template let-orgn pTemplate="item">
                                 <div class="country-item">
                                     
                                     <div>{{orgn.name}}</div>
                                 </div>
                             </ng-template>
                         </p-multiSelect> 
                     </div>



                 
                <div class="field">
                    <label for="status">Role</label>
                    <!-- <p-dropdown id="role" [options]="unirole" optionLabel="name" [(ngModel)]="user.role" placeholder="Select a Role"  [showClear]="true">
                        
                       
                        <ng-template pTemplate="selectedItem">
                            <span *ngIf="user && user.role" >{{user.role.name}}</span>

                        </ng-template>
                        <ng-template let-role pTemplate="item" >
                            <span >{{role}}</span>
                        
                        </ng-template>
                        
                    </p-dropdown> -->
                   
                    
                    <p-dropdown [options]="unirole" [(ngModel)]="user.role" placeholder="Select a Role" [showClear]="true"></p-dropdown>
                  
                 
                   
                </div>



                
           
                <!-- <h4>{{role.name}}</h4> -->

                

            <div>
                <div>

<br><br>
<br>
<br><br>



                </div>
            </div>
               

               


                
          
            </ng-template>
          
            
           
           
            

            <ng-template pTemplate="footer">
                <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
                <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="saveEditUser()"></button>
            </ng-template>
        </p-dialog>






        <p-dialog [(visible)]="deleteUserDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
            <div class="flex align-items-center justify-content-center">
                <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
                <span *ngIf="product">Are you sure you want to delete <b>{{user.name}}</b>?</span>
            </div>
            <ng-template pTemplate="footer">
                <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteUserDialog = false"></button>
                <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Yes" (click)="deleteUser()"></button>
            </ng-template>
        </p-dialog>

        <p-dialog [(visible)]="deleteProductsDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
            <div class="flex align-items-center justify-content-center">
                <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
                <span>Are you sure you want to delete selected products?</span>
            </div>
            <ng-template pTemplate="footer">
                <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteProductsDialog = false"></button>
                <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Yes" (click)="confirmDeleteSelected()"></button>
            </ng-template>
        </p-dialog>
    </div>

           </p-tabPanel>













                <p-tabPanel header="Roles" class="line-height-3 m-0">
                <div class="row">
                    <div class="col-6">  
                    <div class="col-12 ">
                        <div class="card px-6 py-6">
                            <p-toast></p-toast>
                            <p-toolbar styleClass="mb-4">
                                <ng-template pTemplate="left">
                                    <div class="my-2">
                                        <button pButton pRipple label="New" icon="pi pi-plus" class="p-button-success mr-2" (click)="openRole()"></button>
                                        <button pButton pRipple label="Delete" icon="pi pi-trash" class="p-button-danger" (click)="deleteSelectedProducts()" [disabled]="!selectedRoles || !selectedRoles.length"></button>
                                    </div>
                                </ng-template>
                
                            
                            </p-toolbar>
                
                            <p-table #dr [value]="roles" [columns]="cols" responsiveLayout="scroll" [rows]="10" [globalFilterFields]="['name','role.name','representative.name','org']" [rows]="5" [paginator]="true" [rowsPerPageOptions]="[5,10,20,30]" [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [(selection)]="selectedRoles" selectionMode="multiple" [rowHover]="true" dataKey="id">
                                <ng-template pTemplate="caption">
                                    <div class="flex flex-column md:flex-row md:justify-content-between md:align-items-center">
                                        <h5 class="m-0">Role</h5>
                                        <span class="block mt-2 md:mt-0 p-input-icon-left">
                                            <i class="pi pi-search"></i>
                                            <input pInputText type="text" (input)="onGlobalFilter(dr, $event)" placeholder="Search..."  class="w-full sm:w-auto"/>
                                        </span>
                                    </div>
                                </ng-template>
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th style="width: 3rem">
                                            <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                                        </th>
                                        <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
                                        <th pSortableColumn="org">Organization<p-sortIcon field="org"></p-sortIcon></th>
                                        
                                        <th pSortableColumn="created_date">Created Date<p-sortIcon field="created_date"></p-sortIcon></th>
                                        
                                        <th></th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-role>
                                    <tr>
                                        <td>
                                            <p-tableCheckbox [value]="role"></p-tableCheckbox>
                                        </td>
                                        <td style="width:14%; min-width:10rem;"><span class="p-column-title">Name</span>
                                            {{role.name }}
                                        </td>
                                        <td style="width:14%; min-width:10rem;">
                                            <span class="p-column-title">Organization</span>
                                            {{role.org}}
                                        </td>
                                        
                                        <td style="width:14%; min-width:8rem;">
                                            <span class="p-column-title">Created Date</span>
                                            {{role.created_date | date:'MM/dd/yyyy  HH:mm:ss'}}
                                        </td>
                                        
                                        <td>
                                            <div class="flex">
                                                <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2" (click)="editRole(role)"></button>
                                                <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="delRole(role)"></button>
                                            </div>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                
                        <p-dialog [(visible)]="roleDialog" [style]="{width: '840px'}" header="Role Details" [modal]="true" class="p-fluid">
                            <ng-template pTemplate="content">
                                <!-- <img [src]="'assets/demo/images/product/' + product.image" [alt]="product.image" width="150" class="mt-0 mx-auto mb-5 block shadow-2" *ngIf="product.image">
                                <div class="field">
                                    <label for="name">Name</label>
                                    <input type="text" pInputText id="name" [(ngModel)]="product.name" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !product.name}"/>
                                    <small class="ng-dirty ng-invalid" *ngIf="submitted && !product.name">Name is required.</small>
                                </div>
                                <div class="field">
                                    <label for="description">Description</label>
                                    <textarea id="description" pInputTextarea [(ngModel)]="product.description" required rows="3" cols="20"></textarea>
                                </div>
                
                                <div class="field">
                                    <label for="status">Inventory Status</label>
                                    <p-dropdown id="status" [options]="statuses" optionLabel="label" [(ngModel)]="product.inventoryStatus" placeholder="Select a Status">
                                        <ng-template pTemplate="selectedItem">
                                            <span *ngIf="product && product.inventoryStatus" [class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span>
                                        </ng-template>
                                        <ng-template let-status pTemplate="status">
                                            <span [class]="'product-badge status-' + status.value.toLowerCase()">{{status.label}}</span>
                                        </ng-template>
                                    </p-dropdown>
                                </div> -->
                
                                <!-- <div class="field">
                                    <label class="mb-3">Category</label>
                                    <div class="formgrid grid">
                                        <div class="field-radiobutton col-6">
                                            <p-radioButton id="category1" name="category" value="Accessories" [(ngModel)]="product.category"></p-radioButton>
                                            <label for="category1">Accessories</label>
                                        </div>
                                        <div class="field-radiobutton col-6">
                                            <p-radioButton id="category2" name="category" value="Clothing" [(ngModel)]="product.category"></p-radioButton>
                                            <label for="category2">Clothing</label>
                                        </div>
                                        <div class="field-radiobutton col-6">
                                            <p-radioButton id="category3" name="category" value="Electronics" [(ngModel)]="product.category"></p-radioButton>
                                            <label for="category3">Electronics</label>
                                        </div>
                                        <div class="field-radiobutton col-6">
                                            <p-radioButton id="category4" name="category" value="Fitness" [(ngModel)]="product.category"></p-radioButton>
                                            <label for="category4">Fitness</label>
                                        </div>
                                    </div>
                                </div> -->

                                <div >
                                    <div class="card">
                                        <h5>Privilege List</h5>
                                        <p-pickList [source]="priviliges" [target]="targetPrivilege" [(ngModel)]="targetPrivilege"sourceHeader="From" targetHeader="To" [dragdrop]="true"
                                                    [responsive]="true" [sourceStyle]="{'height':'250px', 'width':'300px'}" [targetStyle]="{'height':'250px', 'width':'300px'}">
                                            <ng-template let-privilige pTemplate="item">
                                                <div>{{privilige.name}}</div>
                                            </ng-template>
                                        </p-pickList>
                                    </div>
                                </div>


                
                                <div class="formgrid grid">
                                    <!-- <div class="field col">
                                        <label for="price">Role</label>
                                        <p-inputNumber id="price" [(ngModel)]="product.price" mode="currency" currency="USD" locale="en-US"></p-inputNumber>
                                    </div>
                                    <div class="field col">
                                        <label for="quantity">Organization</label>
                                        <p-inputNumber id="quantity" [(ngModel)]="product.quantity"></p-inputNumber>
                                    </div> -->
                                    <div class="field">
                                        <label for="name">Role</label>
                                        <input type="text"  pInputText id="name" [(ngModel)]="role.name" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !role.name}"/>
                                        <small class="ng-dirty ng-invalid" *ngIf="submitted && !role.name">Role Name is required.</small>
                                    </div>
                                    <div class="field">
                                        <label for="username">Organization</label>
                                        
                                        <input type="text"  pInputText id="org" [(ngModel)]="role.org" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !role.org}"/>
                                        <small class="ng-dirty ng-invalid" *ngIf="submitted && !role.org">Organization name is required.</small>
                                    </div>
                                </div>
                            </ng-template>
                
                            <ng-template pTemplate="footer">
                                <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
                                <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="saveRole()"></button>
                            </ng-template>
                        </p-dialog>
                
                        <p-dialog [(visible)]="deleteRoleDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
                            <div class="flex align-items-center justify-content-center">
                                <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
                                <span *ngIf="product">Are you sure you want to delete <b>{{role.name}}</b>?</span>
                            </div>
                            <ng-template pTemplate="footer">
                                <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteProductDialog = false"></button>
                                <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Yes" (click)="confirmDeleteRole()"></button>
                            </ng-template>
                        </p-dialog>
                
                        <p-dialog [(visible)]="deleteRolesDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
                            <div class="flex align-items-center justify-content-center">
                                <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
                                <span>Are you sure you want to delete selected products?</span>
                            </div>
                            <ng-template pTemplate="footer">
                                <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteProductsDialog = false"></button>
                                <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Yes" (click)="confirmDeleteSelected()"></button>
                            </ng-template>
                        </p-dialog>
                    </div>
           
    
</div>
                

<div class="col-6" >
    <div class="col-12 ">
        <div class="card">
             <h5> Available Privileges </h5>
                <p-table [value]="priviliges" [paginator]="true" [rows]="5" responsiveLayout="scroll">
                    <ng-template pTemplate="header">
                        <tr>
                            
                            <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
                            <th pSortableColumn="date">Created Date <p-sortIcon field="price"></p-sortIcon></th>
                            
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-privilige>
                        <tr>
                            <!-- <td style="width: 15%; min-width: 5rem;">
                                <img src="assets/demo/images/product/{{product.image}}" class="shadow-4" alt="{{product.name}}" width="50">
                            </td> -->
                            <td style="width: 35%; min-width: 7rem;">{{privilige.name}}</td>
                            <td style="width: 35%; min-width: 8rem;">{{privilige.created_date | date:'MM/dd/yyyy  HH:mm:ss'}}</td>
                            <td style="width: 15%;">
                                <button pButton pRipple type="button" icon="pi pi-search" class="p-button p-component p-button-text p-button-icon-only"></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
        </div>
    </div>
</div>
</div>
                </p-tabPanel>
                <p-tabPanel header="Logs" class="line-height-3 m-0">
                    At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum
                    deleniti atque corrupti quos dolores
                    et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui
                    officia deserunt mollitia animi, id est laborum et dolorum fuga.
                    Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est
                    eligendi optio cumque nihil impedit
                    quo minus.
                </p-tabPanel>
            </p-tabView>
        </div>
  
</div>
